{{#each model as |address index|}}
<div class="input-group-vertical t-address-group">
  <div class="input-group">
    <span class="input-group-btn">
      <button class="t-del-address-btn btn btn-default btn-sm delete" type="button" {{action 'delete' address}}>{{fa-icon "minus"}}</button>
    </span>
      {{power-select-foreign-key
        mainModel=address
        selected=address.address_type
        change_method='change_address_type'
        relatedModels=address_types
        relatedModelName='address-type'
      }}
  </div>
  <div class="input-group">
    <span class="input-group-addon address-label">{{t "admin.address.address"}}</span>
    {{textarea value=address.address class="form-control t-address-address"}}
    {{#validation-error-field className="t-input-multi-address-validation-error" submitted=submitted field="address" model=address index=index validation="addressFormat"}}{{t "validation.invalid"}} {{t "admin.address.address"}}{{/validation-error-field}}
  </div>
  <div class="input-group">
    <span class="input-group-addon address-label">{{t "admin.address.city"}}</span>
    {{input type="text" value=address.city class="form-control t-address-city"}}
  </div>
  <div class="input-group">
    <span class="input-group-addon address-label">{{t "admin.address.state.one"}}</span>
    {{db-fetch-select
      model=address
      selectedAttr=address.state
      className="t-address-state"
      displayName="name"
      change_func="change_state"
      repository=stateDbFetch
      searchMethod="findState"
      valuePath="name"
    }}
  </div>
  <div class="input-group">
    <span class="input-group-addon address-label">{{t "admin.address.postal_code"}}</span>
    {{input type="text" value=address.postal_code class="form-control t-address-postal-code"}}
    {{#validation-error-field className="t-input-multi-address-zip-validation-error" submitted=submitted field="postal_code" model=address index=index validation="postal_codeFormat"}}{{t "validation.invalid"}} {{t "admin.address.postal_code"}}{{/validation-error-field}}
  </div>
  <div class="input-group">
    <span class="input-group-addon address-label">{{t "admin.address.country.one"}}</span>
    {{db-fetch-select
      model=address
      selectedAttr=address.country
      className="t-address-country"
      displayName="name"
      change_func="change_country"
      repository=countryDbFetch
      searchMethod="findCountry"
      valuePath="name"
    }}
  </div>
</div>
{{/each}}
<button class="t-add-address-btn btn-add btn btn-default btn-sm" type="button" {{action 'append'}}><span class="btn-label">{{fa-icon "plus"}} {{t "admin.address.add"}}</span></button>
