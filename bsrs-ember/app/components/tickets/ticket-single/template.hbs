<form {{action "return false" this on="submit"}}>
    <article class="main">
        <div class="wrapper form">
            <header>
                {{base-component
                    model=model
                    save="save"
                    cancel="cancel"
                    delete="delete"
                }}
            </header>
            <section class="docSection container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <section style="padding-bottom: 0">
                            <div class="row card-title">
                                <h1 class="col-md-12 t-ticket-header">
                                    {{model.sorted_categories.lastObject.name}}
                                    <small>#{{model.number}}</small>
                                </h1>
                                <div class="col-md-12 meta-data">
                                    {{tickets/ticket-priority-tag item=model}}
                                    {{tickets/ticket-status-tag item=model}}
                                    <span class="create-date" title="{{moment-format model.created 'dddd, MMMM Do YYYY, h:mm:ss a z'}}">{{t 'ticket.created' requester=model.requester timestamp=(moment-from-now model.created)}}</span>
                                </div>
                                <div class="col-md-12">
                                    {{#parent-ticket-category-select ticket=model as |child_valid|}}
                                    <span class="validation validation-under category-validation-error t-category-validation-error {{child-validation submitted child_valid}}">invalid category</span>
                                    {{/parent-ticket-category-select}}
                                </div>
                                <div class="col-md-12 request-wrap">
                                    <label class="small-label">{{t "ticket.label.request"}}</label>
                                    {{textarea autoresize=true placeholder=(t "ticket.label.request") value=model.request class="form-control t-ticket-request ticket-request"}}
                                    {{#validation-error-field submitted=submitted field="request" className="validation validation-under t-request-validation-error" model=model validation=requestValidation}}invalid request{{/validation-error-field}}
                                </div>
                            </div>
                        </section>
                    </div>
                    {{tickets/ticket-comments-and-file-upload model=model priorities=priorities statuses=statuses save=(action "save")}}
                  </div>
                {{activity-list model=activities}}
            </section>
        </div>
    </article>
    <aside class="side-panel">
        <header>
            <h1></h1>
        </header>
        <menu class="t-side-menu">
            <section>
                <div class="col-md-12">
                    {{#form-group title="ticket.label.location-name" for="location"}}
                    {{ticket-location-select ticket=model}}
                    {{#validation-error-field submitted=submitted field="location" className="validation validation-under t-location-validation-error" model=model validation=locationValidation}}invalid location{{/validation-error-field}}
                    {{/form-group}}
                </div>
                <div class="col-md-12">
                    {{#form-group title="ticket.label.assignee-fullname" for="assignee"}}
                    {{ticket-assignee-select ticket=model}}
                    {{#validation-error-field submitted=submitted field="assignee" className="validation validation-under t-assignee-validation-error" model=model validation=assigneeValidation}}invalid assignee{{/validation-error-field}}
                    {{/form-group}}
                </div>
                <div class="col-md-12">
                    {{#form-group title="ticket.label.cc" for="cc"}}
                    {{ticket-cc-power-select ticket=model}}
                    {{/form-group}}
                </div>
            </section>
        </menu>
    </aside>
</form>
