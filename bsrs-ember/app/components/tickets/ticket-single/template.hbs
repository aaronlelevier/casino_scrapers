<form {{action "return false" this on="submit"}}>
    <aside class="side-panel">
        <header>
            <h1></h1>
        </header>
        <menu class="t-side-menu">
            <section>
                <div class="col-md-12">
                    {{#form-group title="ticket.label.location-name" for="location"}}
                    {{ticket-location-select ticket=model}}
                    {{#validation-error-field submitted=submitted field="location" className="validation validation-under t-location-validation-error" model=model validation=locationValidation}}invalid location{{/validation-error-field}}
                    {{/form-group}}
                </div>
                <div class="col-md-12">
                    {{#form-group title="ticket.label.requester" for="requester"}}
                    {{input type="text" placeholder=(t "ticket.label.requester") value=model.requester.name class="form-control t-ticket-requester ticket-requester"}}
                    {{/form-group}}
                </div>
                <div class="col-md-12">
                    {{#form-group title="ticket.label.assignee-fullname" for="assignee"}}
                    {{ticket-assignee-select ticket=model}}
                    {{#validation-error-field submitted=submitted field="assignee" className="validation validation-under t-assignee-validation-error" model=model validation=assigneeValidation}}invalid assignee{{/validation-error-field}}
                    {{/form-group}}
                </div>
                <div class="col-md-12">
                    {{#form-group title="ticket.label.cc" for="cc"}}
                    {{ticket-cc-power-select ticket=model}}
                    {{/form-group}}
                </div>
            </section>
        </menu>
    </aside>
    <article class="main">
        <div class="wrapper form">
            <header>
                {{base-component
                    model=model
                    save="save"
                    cancel="cancel"
                    delete="delete"
                }}
            </header>

            <section class="docSection container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <section style="padding-bottom: 0">
                            <div class="row card-title">
                                <h1 class="col-md-12 t-ticket-header">
                                    {{model.sorted_categories.lastObject.name}}
                                    <small>#{{model.number}}</small>
                                </h1>
                                <div class="col-md-12 ticket-created">
                                    <span class="tag {{model.status_class}}">{{fa-icon 'clock-o'}} {{t model.status.name}}</span><span class="tag {{model.priority_class}}">{{fa-icon 'exclamation-triangle'}} {{t model.priority.name}}</span>
                                    {{t 'ticket.label.created'}} {{moment-format model.created 'LLL z'}}</div>
                                <div class="col-md-12">
                                    {{#parent-ticket-category-select ticket=model top_level_category_options=top_level_category_options as |child_valid|}}
                                    <span class="validation validation-under category-validation-error t-category-validation-error {{child-validation submitted child_valid}}">invalid category</span>
                                    {{/parent-ticket-category-select}}
                                </div>
                                <div class="col-md-12">
                                    {{input type="text" placeholder=(t "ticket.label.request") value=model.request class="form-control t-ticket-request ticket-request"}}
                                    {{#validation-error-field submitted=submitted field="request" className="validation validation-under t-request-validation-error" model=model validation=requestValidation}}invalid request{{/validation-error-field}}
                                </div>
                            </div>
                        </section>
                    </div>
                    <div class="col-md-12">
                        <section>
                            <div class="row">
                                <div class="col-md-12">
                                    {{comment-save model=model}}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="ticket-actions">
                                        <div class="ticket-action save">
                                            <span {{action 'save'}} class="btn btn-default add-btn">{{fa-icon 'check-circle'}} Save</span>
                                        </div>
                                        <div class="ticket-action attach">
                                            {{attach-file model=model}}
                                        </div>
                                        <div  class="ticket-action priority">
                                            {{ticket-priority-select ticket=model priorities=priorities}}
                                            {{#validation-error-field submitted=submitted field="priority" className="validation validation-under t-priority-validation-error" model=model validation=priorityValidation}}invalid priority{{/validation-error-field}}
                                        </div>
                                        <div class="ticket-action status">
                                            {{ticket-status-select ticket=model statuses=statuses}}
                                            {{#validation-error-field submitted=submitted field="status" className="validation validation-under t-status-validation-error" model=model validation=statusValidation}}invalid status{{/validation-error-field}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
                {{activity-list model=activities}}
            </section>
        </div>
    </article>
</form>
